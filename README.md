# DLX and 8 Queens

[Try it!](https://christernilsson.github.io/DLX-and-8-Queens/index.html)

I'm trying to animate [Dancing Links](https://github.com/shreevatsa/knuth-literate-programs/blob/master/programs/dance.pdf) by Donald Knuth, using the [Eight Queens Puzzle](https://en.wikipedia.org/wiki/Eight_queens_puzzle)

The clever choice of options ordering is too smart in [QUEENS-DLX](https://www-cs-faculty.stanford.edu/~knuth/programs/queens-dlx.w) by Knuth. No backtracking occurs below n=16. I decided to start with a naive order. Now backtracking happens *a lot* even for n=8.

* Black labels shows possible moves

## Primary items

Mandatory. All rows and all columns must be covered exactly once

* RA..RH rows (8)
* CA..CH columns (8)

## Secondary items

Not mandatory. Diagonals can be covered at most once

* AA..AO left diagonals (15)
* BA..BO right diagonals (15)

The four corner diagonals, AA, AO, BA and BO have only one option, so they are actually not needed. No risk for two queens on these.

## Options (8 x 8 = 64)

* aa..ah first row, RA
* ha..hh last row, RH
* aa..ha first column, CA
* ah..hh last column, CH
* aa..aa first left diagonal, AA
* hh..hh last left diagonal, AO
* ha..ha first right diagonal, BA
* ah..ah last right diagonal, BO

## Target

When all queens are placed on the board and in legal positions, the first solution has been found. This viewer only shows the first solution.

## Mouse

* Hold the mouse over item names, e.g. CA
* Hold the mouse over a chess square, e.g. a1
* Click on one of the snapshots in the list to the right

## Keyboard

* Use Down Arrow and Up Arrow to navigate amongst the snapshots.
* Use Space to toogle View Mode between compact and expanded

## Snapshots

A JSON file is used. Some extracted lines are shown below
```
constraints:
	entries: {aa:[0, 8, 16, 38]}
	itemNames: Array(46)
		0: "CA"
		1: "CB"
		2: "CC"
		3: "CD"
snapshots:
	3: 
		choices: ["a1", "b3", "c5"]
		entries:
			AE: ["d2"]
			AF: ["e2"]
			AH: (2) ["e4", "g2"]
			AI: (2) ["f4", "h2"]
```

The JSON file is generated by [037-DLX](https://github.com/ChristerNilsson/2020/tree/master/037-DLX)

## Related links

* [Stanford Lecture: Don Knuthâ€”"Dancing Links" (2018)](https://www.youtube.com/watch?v=_cR9zDlvP88&t=3251s&ab_channel=stanfordonline)
* [Original paper](https://arxiv.org/pdf/cs/0011047.pdf)
* [Knuth's Algorithm X](https://en.wikipedia.org/wiki/Knuth%27s_Algorithm_X)
* [Exact Cover](https://en.wikipedia.org/wiki/Exact_cover)
* [Dancing Links](https://en.wikipedia.org/wiki/Dancing_Links)
